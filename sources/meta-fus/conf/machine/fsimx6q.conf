#@TYPE: Machine
#@NAME: fsimx6q
#@SOC: i.MX6
#@DESCRIPTION: Machine configuration for F&S boards with i.MX6 Quad/Dual
#@MAINTAINER: Hartmut Keller <keller@fs-net.de>

UBOOT_SUFFIX ?= "nb0"
IMAGE_FSTYPES ?= "ubifs ext3 sdcard"

require conf/machine/include/imx-base.inc
require conf/machine/include/tune-cortexa9.inc
include conf/machine/include/fus-common.inc

SOC_FAMILY = "mx6:mx6q"

# Preferred providers for kernel and u-boot are overwritten from the file
# fsl-imx-preferred-env.inc that is loaded later. So we defined our own
# file in meta-fus/distro/include that overtrumps NXP's default in
# meta-fsl-bsp-release/imx/meta-sdk/conf/distro/include.
#PREFERRED_PROVIDER_virtual/kernel_mx6 ?= "linux-fus"
#PREFERRED_PROVIDER_u-boot_mx6 = "u-boot-fus"
#PREFERRED_PROVIDER_virtual/bootloader_mx6 = "u-boot-fus"

KERNEL_IMAGETYPE = "uImage"

MKUBIFS_ARGS = "-m 2048 -e 126976 -c 2048"

### TODO: set to login-tty
SERIAL_CONSOLE = "115200 ttymxc1"
#SERIAL_CONSOLE = "115200 ttymxc0"

KERNEL_DEVICETREE = "armstonea9q.dtb armstonea9r2q.dtb efusa9q.dtb picomoda9q.dtb"

SDCARD_ROOTFS ?= "${DEPLOY_DIR_IMAGE}/${IMAGE_NAME}.rootfs.ext3"

UBOOT_CONFIG ??= "ubifs"
UBOOT_CONFIG[ubifs] = "fsimx6_config"
UBOOT_CONFIG[sd] = "fsimx6_config,sdcard"
UBOOT_CONFIG[mfgtool] = "fsimx6_config,mfgtool"
